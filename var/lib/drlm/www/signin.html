<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DRLM Signin</title>
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="js/jquery-3.5.1.min.js"></script>
    <!-- <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.serializeJSON/3.1.1/jquery.serializejson.js"></script> -->
    <script src="js/vue.min.js"></script> 

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <!-- Custom styles for this template -->

    <link href="css/signin.css" rel="stylesheet">
  </head>
  <body class="text-center">
    <main class="form-signin">
      <form>
        <img class="mb-4" src="static/drlm_long.png" alt="" width="250" height="131">
        <h1 class="h2 mb-3 fw-normal">Please sign in</h1>
        <label for="inputUser" class="visually-hidden">Username</label>
        <input type="text" id="inputUser" class="form-control" placeholder="Username" required autofocus>
        <label for="inputPassword" class="visually-hidden">Password</label>
        <input type="password" id="inputPassword" class="form-control" placeholder="Password" required>
        <button class="w-100 btn btn-lg btn-primary" type="submit">Sign in</button>
        <div class="alert alert-success alert-dismissible" id="success" style="display:none;">
          <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
        </div>
        <div class="alert alert-danger alert-dismissible" id="error" style="display:none;">
          <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
        </div>
        <p class="mt-5 mb-3 text-muted">&copy; 2021</p>
      </form>
    </main>
    <script>
      $(document).ready(function() {
        $('form').submit(function(event) {

          var formData = {
            'username'  : $('input[id=inputUser]').val(),
            'password'  : $('input[id=inputPassword]').val()
          };

          $.ajax({
              type: 'POST',
              url: '/signin',
              data: JSON.stringify(formData),
              dataType: 'html',
              cache: false,
              success: function () {
                $("#success").show();
                $('#success').html('Loggin OK !');
                location.href = "/index.html";	
              },
              error: function () {
                $("#error").show();
                $('#error').html('Invalid Username or Password !');
              }
          })

          event.preventDefault();

        });
      });
    </script>
  </body>
</html>
